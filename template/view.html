{% extends 'layout.html' %}

{% block style %}
    <link rel="stylesheet" href="{{ url_for('static', filename = 'view.css') }}">
{% endblock %}

{% block body %}
    <div class="view-container">
        <div class="form form-lg gapped-form">
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('Post.edit_page', post_id = post.id) }}">Edit</a>
            {% endif %}

            <div>
                <p class="notable">Tags:</p>
                <ul class="tag-list">
                    {% for tag in post.tags | sort(attribute='name') %}
                        <li>
                            <a href="{{ url_for('Post.browse_paged', page = 1, terms = tag.name) }}">{{ tag.name }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="post-details">
                <p class="notable">Statistics:</p>

                <p>ID: {{ post.id }}</p>
                <p>Posted: {{ post.created }}</p>
                <p>Uploader: <a href="{{ post.author.profile_url }}">{{ post.author.username }}</a></p>

                {% if post.width %}
                    <p>Size: {{ post.dimensions }}</p>
                {% endif %}

                {% if post.src %}
                    <p>Source: 
                        {% if post.is_hyperlink(post.src) %}
                            <a href="{{ post.src }}">{{ post.src }}</a>
                        {% else %}
                            {{ post.src }}
                        {% endif %}
                    </p>
                {% endif %}

                {% if post.op %}
                    <p>OP: 
                        {% if post.is_hyperlink(post.op) %}
                            <a href="{{ post.op }}">{{ post.op }}</a>
                        {% else %}
                            {{ post.op }}
                        {% endif %}
                    </p>
                {% endif %}

                <p>Name: {{ post.name }}</p>
                <p>Type: {{ post.mime }}</p>

                {% if post.caption is not none %}
                    <p class="caption">Caption: "<i>{{ post.caption }}</i>"</p>
                {% endif %}
            </div>
        </div>

        {% include 'content.html' %}
    </div>

    {% set comments = post.comments %}
    {% block input_comment_section %}
        <form action="/api/comment" method="post" id="comment-form">
            <input type="hidden" name="is_ui" value="true">
            <input type="hidden" name="post_id" value="{{ post.id }}">
            <textarea name="content" placeholder="Your comment goes here."></textarea>
            <input type="submit" value="Comment">
        </form>
    {% endblock %}
    {% include 'frag/comment-section.html' %}
{% endblock %}
